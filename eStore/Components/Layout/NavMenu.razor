@using eStore.Components.Layout
@using eStore.Components.Services
@using BLL.DTOs

@code {
    [Inject] private SessionService SessionService { get; set; } = null!;

    private string GetDisplayName()
    {
        var user = SessionService.GetUserSession();
        if (user?.Email == null) return string.Empty;
        int atIndex = user.Email.IndexOf('@');
        return atIndex > 0 ? user.Email[..atIndex] : user.Email;
    }
}

<nav class="navbar navbar-dark shadow-sm">
    <div class="container-fluid">
        <div class="row w-100 g-0">
            <!-- Left section - Brand -->
            <div class="col-4 d-flex align-items-center">
                <a class="navbar-brand text-white fs-4 fw-medium ps-4 m-0" href="">FU Ecommerce Store</a>
            </div>

            <!-- Middle section - Navigation -->
            <div class="col-4 d-flex align-items-center justify-content-center gap-5">
                <NavLink class="nav-link text-white px-3 py-2" href="" Match="NavLinkMatch.All">
                    Trang Chủ
                </NavLink>
                <NavLink class="nav-link text-white px-3 py-2" href="products">
                    Sản Phẩm
                </NavLink>
                <NavLink class="nav-link text-white px-3 py-2" href="categories">
                    Danh Mục
                </NavLink>
            </div>

            <!-- Right section - User -->
            <div class="col-4 d-flex align-items-center justify-content-end pe-4">
                @if (SessionService.GetUserSession() != null)
                {
                    <div class="dropdown">
                        <a class="nav-link text-white px-3 py-2 dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <span class="bi bi-person-fill" aria-hidden="true"></span>
                            @GetDisplayName()
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#">Mục 1</a></li>
                            <li><a class="dropdown-item" href="#">Mục 2</a></li>
                            <li><a class="dropdown-item" href="#">Mục 3</a></li>
                        </ul>
                    </div>
                }
                else
                {
                    <NavLink class="btn btn-custom-yellow" href="login">
                        <span class="bi bi-box-arrow-in-right" aria-hidden="true"></span>
                        Đăng nhập / Đăng ký
                    </NavLink>
                }
            </div>
        </div>
    </div>
</nav>

